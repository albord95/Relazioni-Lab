\documentclass[a4paper]{article}

\usepackage[T1]{fontenc}
\usepackage[italian]{babel}
\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage{float}
\usepackage[margin=2 cm]{geometry}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{color}
\usepackage{mathtools}
\usepackage{amsmath}
\author{Alberto Bordin, Giulio Cappelli}
\title{Analizzatore di spettro}
\date{27-28 novembre 2017}

\begin{document}
	\maketitle
	
\begin{abstract}
	Misura della separazione in frequenza dei modi di un laser HeNe.
	
	Misura della finezza di un Fabry-Perot.
\end{abstract}

\section{To do}

\begin{itemize}
	\item dire nella teoria che FSR e $\Delta\nu$ li riportiamo per semplicità in unità di tempo
\end{itemize}

\begin{multicols}{2}

\section{Teoria}

\subsection{Laser HeNe}

\subsection{Fabry-Perot}

\section{Apparato sperimentale}

\end{multicols}

\newpage	
\section{Modi del laser HeNe}

Analizziamo la separazione in frequenza dei modi del laser HeNe a nostra disposizione.

\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{due_ordini.png}
	\caption{Due ordini dell'analizzatore. In rosso i picchi di trasmittività della cavità Fabry-Perot e in blu la rampa del generatore di funzioni.}
	\label{fig:due_ordini.png}
\end{figure}

\begin{figure}[H]
	\includegraphics[width=\textwidth]{due_ordini.pdf}
	\caption{Due ordini dell'analizzatore. Segnale di trasmittività salvato nel file .txt.}
	\label{fig:due_ordini.pdf}
\end{figure}

\begin{multicols}{2}

\subsection{Presa dati}

In Figura \ref{fig:due_ordini.png} vediamo un esempio del segnale letto dall'oscilloscopio e visualizzato al PC, e che salviamo anche in formato .txt. Sia per la trasmittività che per la rampa il file di testo riporta due diversi valori di tensione (vedi Figura \ref{fig:due_ordini.pdf}). Notiamo che il segnale visualizzato all'oscilloscopio è la media dei due. Inoltre, confrontando varie prese dati, notiamo che la discrepanza tra i due valori di tensione diminuisce notevolmente all'aumentare della larghezza del picco. Poichè per la misura della separazione in frequenza dei modi è importante la precisione sul tempo di ogni picco scegliamo di utilizzare il segnale più ampio al posto della media dei due.\\
In Figura \ref{fig:un_ordine.png} è riportato un ordine dell'analizzatore.

\subsubsection{Accorgimenti sperimentali}
\begin{itemize}
	\item Regoliamo il generatore di funzioni e il fondo scala dell'oscilloscopio in modo da vedere poco più di una rampa dell'onda triangolare. Così facendo massimizziamo la risoluzione e possiamo misurare a posteriori l'ampiezza dell'onda triangolare.
	\item Come consigliato dal professore\footnote{onniscente} impostiamo l'onda triangolare con $V_{pp} \leq$ 5~V e $f \leq$ 18~Hz per evitare effetti di non linearità del generatore e del piezoelettrico. Abbiamo scelto $V_{pp} \simeq$ 4~V e $f \simeq$ 9~Hz oppure $f =$ 4.50~Hz.
	\item La regione lineare del piezoelettrico si trova a metà del range di funzionamento, i cui estremi sono però sconosciuti.\footnote{Dall'esperienza sull'interferometro di Michelson sappiamo che il range di funzionamento è dell'ordine dei 100 V, tuttavia non abbiamo dati precisi sullo specifico piezoelettrico dell'analizzatore. Inoltre è laborioso stabilire quale sia la tensione effettiva a cui il piezoelettrico viene sottoposto in quanto è la composizione dell'onda triangolare e di \textit{amplitude} e \textit{offset} del controller.} Sul controller del piezoelettrico possiamo regolare i valori di \textit{amplitude} e \textit{offset} e ci aspettiamo che gli estremi del range di funzionamento del piezoelettrico si raggiungano con ampiezza alta e offset massimo oppure minimo. Quindi impostiamo entrambi su valori intermedi.\footnote{In verità per le prese dati 1, 4, 5, 10, 11 visibili nelle Figure \ref{fig:24picchi} e \ref{fig:24fit} l'\textit{amplitude} (ma non l'\textit{offset}) è stata aumentata. Poichè i risultati di queste misure sono compatibili con i restanti li abbiamo lasciati}
	\item Per evitare eventuali sistematiche per circa metà delle prese dati utilizziamo la rampa in salita, per le restanti la rampa in discesa.
\end{itemize}

\end{multicols}

\begin{figure}[H]
		\def\svgwidth{1\textwidth}
		\input{un_ordine.pdf_tex}
		\caption{Un ordine dell'analizzatore. Per la rampa in discesa i $\Delta\nu$ sono invertiti: $\Delta\nu_{12}$ è a destra e $\Delta\nu_{23}$ è a sinistra del picco principale.}
		\label{fig:un_ordine.png}
\end{figure}

\subsection{Analisi dati}

\begin{multicols}{2}
	
La FSR può essere stimata banalmente facendo la differenza tra i tempi di due picchi principali consecutivi. Avendo più di un ordine si può migliorare questa stima ad esempio facendo la media delle varie differenze tra picchi consecutivi oppure prendendo la differenza di tempo tra il primo e l'ultimo e divindendola per il numero di ordini, ma una stima ancora più precisa si può ottenere con un fit. Di seguito (e in Figura \ref{fig:esempio_deltanu}) riportiamo il procedimeto seguito:
\begin{itemize}
	\item tramite uno script in python estraiamo i tempi di ogni picco,
	\item facciamo un grafico "numero di ordine" - "tempo del picco",
	\item eseguiamo un fit lineare.
\end{itemize}
Come si deduce dalla presenza di tre rette parallele in Figura \ref{fig:esempio_deltanu} lo stesso procedimento è seguito per ognuno dei 3 modi visibili. Il coefficiente angolare della retta fittata è la FSR, mentre la differenza tra le intercette è il tempo corrispondente al $\Delta\nu$.
Quindi ricaviamo $\Delta\nu$ con la formula 
\[ \Delta\nu \textrm{ [Hz]}= 1500 \frac{\Delta\nu\textrm{ [ms]}}{FSR\textrm{ [ms]}}\]
Per ridurre ulteriormente l'errore, nel caso in cui le rette non fossero esattamente parallele, per la FSR prendiamo la media dei 3 coefficienti angolari misurati e la differenza tra le intercette la prendiamo a metà delle rette.
Fit e calcoli sono stati eseguiti con python 3, per brevità riportiamo solo il valore di $\Delta\nu$ e lasciamo a disposizione il codice dello script al link in nota.\footnote{https://github.com/albord95/relazioni-lab-ottica-quantistica/tree/master/Analizzatore\%20di\%20spettro/dati\%20e\%20script \\ Scaricare tutta la cartella ed eseguire modi\_laser\_HeNe.py. Serve python 3 con i pacchetti pylab, scipy, uncertainties e gvar.\label{ftn:link}}
	
\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\textwidth]{esempio_deltanu.pdf}
	\caption{Esempio di analisi. In appendice sono riportate anche le restanti prese dati. La rampa del plot in alto è riscalata per questioni estetiche.}
	\label{fig:esempio_deltanu}
\end{figure}

\subsubsection{Discussione dei risultati}
La media pesata delle 24 prese dati eseguite dà
\[\Delta\nu_{12} = 436.0 \pm 1.0 \textrm{ Hz} \]
\[\Delta\nu_{23} = 433.0 \pm 1.0 \textrm{ Hz} \]
dove $\Delta\nu_{12}$ e $\Delta\nu_{23}$ sono definiti come nella didascalia di Figura \ref{fig:un_ordine.png}.
La loro differenza è 
\[\Delta\nu_{12}-\Delta\nu_{23} = 2.9 \pm 1.4 \textrm{ Hz}\footnote{La differenza riportata non è 3.0 ma 2.9 perché i calcoli sono stati eseguiti con più cifre di quelle mostrate. Lo script modi\_laser\_HeNe.py (nota \ref{ftn:link}) stampa anche le cifre aggiutive. La propagazione degli errori è gestita col pacchetto gvar di python.}\]
ed è compatibile con 0 entro poco più di 2 sigma (p\_value = 3 \%). La differenza riscontrata è da imputarsi al solo errore sperimentale perché dal punto di vista teorico $|\Delta\nu_{12}-\Delta\nu_{23}| \sim 10^{-5}\Delta\nu_{12}$, che è trascurabile. Pertanto ha senso calcolare la media di $\Delta\nu_{12}$ e $\Delta\nu_{23}$: \[\Delta\nu_{medio} = 434.5 \pm 0.7 \textrm{ Hz}\] che è compatibile con quanto riportato nel datasheet ($\Delta\nu_{nominale}$ = 435 Hz).

\subsubsection{Discussione degli errori}

La compatibilità tra $\Delta\nu_{12}$ e $\Delta\nu_{23}$ e con $\Delta\nu_{nominale}$ dipende fortemente dalla scelta degli errori utilizzati per i fit di Figura \ref{fig:24fit}. Un fit di minimi quadrati ha senso se gli errori sulle $y$ sono delle deviazioni standard.\\
Possiamo ragionevolmente supporre che l'errore sui tempi dell'oscilloscopio derivi dalla sola digitalizzazione.\footnote{Il datasheet dell'oscilloscopio indica una risoluzione precisa fino a 0.4 ns, quindi la supposizione fatta è ragionevole poiché per le frequenze da noi utilizzate la digitalizzazione è $0.2 \div 0.4$ ms.} Supponiamo quindi che se la risoluzione dell'oscilloscopio è 1 ms un valore 0.49 viene letto 0 e il valore 0.51 viene letto 1, quindi l'errore assoluto è metà della risoluzione. Inoltre avrà una distrubuzione uniforme tra $- 0.5\cdot \textit{risoluzione}$ e $+ 0.5\cdot \textit{risoluzione}$: quindi la deviazione standard sarà 
\begin{equation}
	\tag{*}
	\sigma = 0.68 \cdot 0.5\cdot \textit{risoluzione}
	\label{eq:sigma}
\end{equation}
Usando la \ref{eq:sigma} per gli errori sulle $y$ nei fit di Figura \ref{fig:24fit} e propagando gli errori sui parametri fittati si ottiene l'errore su $\Delta\nu$.
Per testare la validità della \ref{eq:sigma} abbiamo anche calcolato a posteriori la deviazione standard tra i valori misurati nelle 24 diverse prese dati. In Figura \ref{fig:deviazioni_standard} è graficato il confronto tra i due approcci. L'accordo è ottimo.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\textwidth]{deviazioni_standard.pdf}
	\caption{Confronto tra gli errori stimati dal fit (barre blu) per ciascuna presa dati e deviazione standard calcolata tra i valori delle 24 prese dati (banda rossa).}
	\label{fig:deviazioni_standard}
\end{figure}

Per verificare che non ci fossero evidenti sistematiche tra i $\Delta\nu$ calcolati con la rampa in salita e quelli calcolati con la rampa in discesa abbiamo graficato entrambi in Figura \ref{fig:salita_discesa}. Non si osservano discrepanze.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\textwidth]{confronto_salita_discesa.pdf}
	\caption{Confronto tra le misure di $\Delta\nu$ tra prese dati con la rampa in salita e con la rampa in discesa. Per ogni presa dati è graficata la media tra $\Delta\nu_{12}$ e $\Delta\nu_{23}$.}
	\label{fig:salita_discesa}
\end{figure}

\subsection{Conclusioni}
Abbiamo ottenuto 
\[\Delta\nu_{12} = 436.0 \pm 1.0 \textrm{ Hz} \]
\[\Delta\nu_{23} = 433.0 \pm 1.0 \textrm{ Hz} \]
la cui media è \[\Delta\nu_{medio} = 434.5 \pm 0.7 \textrm{ Hz}\] che è compatibile con quanto riportato nel datasheet del laser HeNe ($\Delta\nu_{nominale}$ = 435 Hz).\\
Non sono state osservate incompatibilità né tra $\Delta\nu_{12}$ e $\Delta\nu_{23}$ né tra i $\Delta\nu$ con rampa in salita e con rampa in discesa.\\
Gli errori statistici, discussi ampiamente nella sezione dedicata, seguono la distribuzione attesa.
	
\end{multicols}
	
\section{Finezza del Fabry-Perot}

\begin{multicols}{2}
	
Ricaviamo la finezza con la formula
\[\mathcal{F} = \frac{FSR}{FWHM}\]
dove $FWHM$ è la larghezza a metà altezza di un picco.
	
\subsection{Procedura e accorgimenti}
$FWHM$ è due ordini di grandezza più piccola del $FSR$, quindi è necessario cambiare la scala temporale dell'oscilloscopio senza alterare le restanti condizioni sperimentali. Adottiamo il seguente algoritmo:
\begin{itemize}
	\item Impostiamo la rampa in modo da vedere 3 picchi principali.
	\item Aggiustiamo il trigger dell'oscilloscopio in modo che il picco centrale stia a metà rampa e a metà schermo. In questo modo diminuendo la scala temporale il picco centrale si allarga rimanendo centrato sullo schermo.
	\item Alterniamo misure di $FSR$ a misure di $FWHM$.
\end{itemize}

Per assicurarci la stabilità delle condizioni sperimentali non cambiamo mai l'onda del generatore di funzioni né l'\textit{amplitude} del controller del piezo. Ritocchiamo solo l'\textit{offset} e l'allieneamento dell'ultimo specchio, solo se necessario e soltanto dopo una misura di $FWHM$.

Oltre a quelli appena sottolineati adottiamo gli stessi accorgimenti della misura di $\Delta\nu$, in particolare eseguiamo metà delle prese dati con la rampa in salita e metà in discesa e, per evitare nonlinearità, adottiamo le seguenti condizioni sperimentali:
\begin{align*}
V_{pp} &= 3.8(1) \textrm{ V} \\
f &= 4.50(1) \textrm{ Hz}\\
\textit{amplitude} &\sim\textrm{circa a metà} \\
\textit{offset} &\sim\textrm{circa a metà}
\end{align*}

\end{multicols}

\newpage
\centering
\section*{Appendice}

\begin{figure}[H]
	\makebox[\textwidth]{\includegraphics[width=1.18\linewidth]{24picchi.pdf}}
	\caption{Selezione dei tempi per i fit di Figura \ref{fig:24fit}.}
	\label{fig:24picchi}
\end{figure}

\begin{figure}[H]
	\makebox[\textwidth]{\includegraphics[width=1.18\linewidth]{24fit.pdf}}
	\caption{Fit e calcolo dei $\Delta\nu$.}
	\label{fig:24fit}
\end{figure}

	
\end{document}

